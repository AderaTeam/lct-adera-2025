## adera-lct-2025

## Краткое описание продукта и его функциональности
Продукт представляет из себя две системы: аналитический дашборд и модель обработки пользовательских отзывов
- Дашборд представляет следующую информацию:
    - Тональность и процентиль отзывов - положительные, нейтральные, негативные, их соотношение
    - Динамика тональность - изменение процентовки отзывов разных тональностей за выбранный период
    - Динамика количества отзывов - абсолютное количество отзывов за выбранный промежуток с определенным шагом
    - Определение аномалий - отображение моментов, когда появилось аномально большое количество положительных/отрицательных отзывов
    - Топ продуктов - сортировка продуктов по наибольшому проценту положительных или отрицательных отзывов
    - Мультивыбор продуктов - возможность выбрать количество продуктов используемых для анализа и выведение их на дашборд
    - Фильтрация по:
        - Источникам
        - Продуктам
        - Тональностям
        - Периоду
    - Загрузка/выгрузка данных через интерфейс
- Модель имеет следующие функции:
    - Парсинг отзывов с агрегаторов
    - Выделение продуктов из отзывов
    - Определение тональности отзыва


## Техническая информация
### Архитектура
![Архитектура проекта](/docs/architecture.jpg)

### Исследование алгоритмов

В данном разделе представленны результаты исследования отзывов клиентов собранных с [banki.ru](https://www.banki.ru/)

### Описание данных

В результате работы парсера были собранны отзывы:
- **[banki.ru](https://www.banki.ru/)** 
    - число уникальных: 7000 шт.
    - данные представленны в `json` формате со следующими заголовками
        - *title* - заголовок отзыва;
        - *text* - текст отзыва;
        - *date_added* - дата создания отзыва; 

Все результаты эксперементов сохраняются в папку `research_data/experements_results/`
### Описание основных инструментов использованных в исследованиях

- [`Marimo`]() - динамически исполняемый ноутбук`Python` ноутбук
- [`KeyBERT`]() - для выделение ключевых слов в документе;
- [`BERTopic`]() - для тематическое моделирования;
- [`Spacy`]() - для генерации графа связности в предложении и выделения мусорных слов;


### Описание отчётов

В процесе анализа данных, были созданны отчёты, с использованием `marimo` - динамически исполняемых ноутбуков. 

В форме читаемого отчёта, ноутбуки храняться в папке `research_data/reports/`.

Исходный код ноутбуков представлен в папке `research_data/code/`, для запуска ноутбука, нужно выполнить следующий список команд:

- установка необходимых зависимостей, для большего удобства был использован пакетный мэнеджер `poetry`:

    ```bash
    poetry install
    ```

- запуск ноутбука (надо находиться в папке `research_data`):
    - для редактирования  (исполняемый код будет показан):
        ```
        poetry run marimo edit ./code/<имя_необходимого_ноутбука>
        ```
    - для просмотра (исполняемый код **не** будет показан)
        ```
        poetry run marimo run ./code/<имя_необходимого_ноутбука>
        ```

#### Поиск топиков

Для поиска основных тем, существует несколько подходов:

- Кластеризация - стандартные алгоритмы кластеризации:
    - являются понятными/легко интерпритируемыми
    - позволяют легко оценивать полученный результат (локоть силуета)
    - но не позволяют легко оценивать поднятые топики внутри документа, т.е. документы предварительно надо ещё разделить 
- LDA - является стандартным подходом для тематического моделирования
    - слишком медленный и долгий
- BERTopic - современный подход заменивший LDA и объединяющий в себе ещё и кластеризацию

##### Первичное представление данных `./code/first_data_preview.py`
##### Простое динамическое представление данных `./code/bertopic_only.py`
#####
##### Первичное представление данных `./code/first_data_preview.py`

Общие технические материалы по проекту собраны в папке [`docs`](docs),
в том числе там находится (относительно) актуальная Postman-коллекция и схема сущностей.

### Клиентская часть проекта (фронтэнд системы) включает в себя веб-приложение:

- [`adera-dashboard`](packages/frontend/adera-dashboard) (`d:`) – веб-приложение на React (Vite), интерфейс дашборда

Общий для всех веб-приложений код вынесен во внутренние библиотеки:

- [`@adera/auth-fetch`](packages/frontend/lib/auth-fetch) (`af:`) – React-провайдер всего необходимого для авторизации и запросов к API
- [`@adera/ui`](packages/frontend/lib/ui) (`ui:`) – UI-кит проекта, общие для веб-приложений стили, компоненты и утилиты
- [`@adera/eslint-plugin-import-paths`](packages/frontend/lib/eslint-plugin-import-paths) (`ip:`) – плагин для ESLint, правильно исправляет импорты на абсолютные и относительные

Детальную информацию по конкретным пакетам ищите в их собственных `README.md`.

### Разработка

Здесь используются (и уже настроены) современная версия [Yarn 2+](https://yarnpkg.com/getting-started/migration) и [Yarn Workspaces](https://yarnpkg.com/features/workspaces) –
достаточно один раз выполнить команду **`yarn install`** из корня репозитория,
чтобы установить зависимости сразу для всех входящих в него JS-пакетов, используя один общий `yarn.lock`.

Главы в этот раздел добавляются исходя из потребностей (и запросов!) разработчиков –
обязательно сообщите, если здесь не хватает какой-либо информации.

#### Окружение

Для упрощения локальной работы с внешними зависимостями в папке `_docker` лежит файл `docker-compose.yml`.
Достаточно выполнить там команду **`docker-compose up -d`**
для автоматической установки и запуска всех необходимых инструментов в формате Docker-контейнеров.

#### Команды

Yarn позволяет контролировать отдельные пакеты (workspaces) прямо из корня моно-репозитория.
Например, можно использовать команду **`yarn workspace adera-dashboard dev`**
(или даже просто **`yarn d:dev`** – см. [Yarn Global Scripts](https://yarnpkg.com/features/workspaces#global-scripts))
для запуска конкретного сервиса.

### Инфраструктура

Требуются **PostgreSQL**

#### `adera-dashboard`

- Собранное в статику веб-приложение
- Не требует никаких внешних зависимостей
- Ожидает найти себя на корне отдельного домена и само контролирует роутинг
- Отправляет запросы к `backend_name` на `/api`
